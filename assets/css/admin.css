:root {
  --bg: #0c0f14;
  --bg2: #11151c;
  --bg3: #171c23;
  --stroke: rgba(255,255,255,0.08);
  --stroke-2: rgba(255,255,255,0.12);
  --text: #ffffff;
  --text-soft: rgba(255,255,255,0.65);
  --muted: rgba(255,255,255,0.45);
  --accent: #00d9ff;
  --accent-soft: rgba(0,217,255,0.25);
  --green: #20d977;
  --yellow: #ffd24d;
  --orange: #ff9e3d;
  --red: #ff5d5d;
  --radius: 8px;
  --radius-lg: 12px;
  --shadow: 0 6px 28px rgba(0,0,0,.45);
  --transition: .22s ease;
}

* { box-sizing: border-box; }
html, body { height: 100%; }
body { background: var(--bg); color: var(--text); font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", Inter, system-ui, sans-serif; }
button, input, select, textarea { font: inherit; color: inherit; }

/* ==================== UTIL ==================== */
.sr-only { position:absolute!important; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); border:0; }
.muted { color: var(--muted); }
.empty { padding: 18px; text-align: center; color: var(--muted); border: 1px dashed var(--stroke); border-radius: var(--radius); background: transparent; }

/**************** AUTH ****************/ 
.auth-screen { min-height: 100vh; display:flex; align-items:center; justify-content:center; padding: 24px; }
.auth-card { background: var(--bg2); border:1px solid var(--stroke); border-radius: var(--radius-lg); padding: 28px; width: 100%; max-width: 420px; box-shadow: var(--shadow); text-align:center; }
.brand-xl { font-weight: 800; letter-spacing:.5px; margin-bottom: 10px; }
.brand-xl span { color: var(--accent); }
.error-text { color: var(--red); margin-top: 10px; min-height: 20px; }

/**************** LAYOUT ****************/ 
.admin-root { height: 100vh; }
.app-shell { display: grid; grid-template-columns: 260px 1fr; grid-template-rows: auto; height: 100vh; }

/* Sidebar */
.sidebar { background: var(--bg2); border-right:1px solid var(--stroke); display:flex; flex-direction:column; }
.sidebar-brand { display:flex; align-items:center; gap:10px; padding:16px 16px; border-bottom:1px solid var(--stroke); }
.logo-dot { width:10px; height:10px; border-radius:50%; background: var(--accent); box-shadow: 0 0 0 3px var(--accent-soft); }
.brand { font-weight: 800; letter-spacing:.3px; }
.brand span { color: var(--accent); }

.side-nav { display:flex; flex-direction:column; padding: 10px; gap: 6px; }
.side-link { display:flex; align-items:center; gap:10px; width:100%; padding: 10px 12px; border-radius: 8px; border:1px solid transparent; background: transparent; color: var(--text-soft); cursor: pointer; transition: var(--transition); text-align:left; }
.side-link .ic { opacity:.9; }
.side-link:hover { background: #0f141b; color: var(--text); border-color: var(--stroke); }
.side-link.active { background: var(--bg3); color: var(--text); border-color: var(--stroke-2); }
.side-link.danger { color: #e2e8f0; background:#15202b; }
.side-link.danger:hover { background:#1a2633; }

.pill { margin-left:auto; background:#1a2330; color:#cde8ff; border:1px solid var(--stroke); border-radius: 999px; padding: 2px 8px; font-size:12px; font-weight:700; }

.side-bottom { margin-top:auto; padding: 10px; }

/* Main */
.main { display:flex; flex-direction:column; min-width:0; }
.topbar { position: sticky; top:0; z-index: 10; display:flex; align-items:center; justify-content: space-between; gap: 10px; padding: 12px 16px; border-bottom:1px solid var(--stroke); background: linear-gradient(180deg, rgba(17,21,28,.95), rgba(17,21,28,.92)); backdrop-filter: saturate(1.1); }
.crumbs { font-weight: 700; }
.kbd-hint { font-weight: 700; border:1px solid var(--stroke); padding: 2px 6px; border-radius:6px; color: var(--muted); }

.views { padding: 16px; }
.view { display:none; }
.view.active { display:block; }
.view-head { display:flex; align-items:center; justify-content: space-between; gap:10px; margin-bottom: 12px; }
.view-actions { display:flex; align-items:center; gap:8px; }

/* Inputs */
.input, select.select { width:100%; max-width: 420px; background:#0d1218; border:1px solid var(--stroke); border-radius: 8px; padding: 10px 12px; color: var(--text); transition: var(--transition); }
.input:focus, select.select:focus { outline: none; border-color: var(--stroke-2); box-shadow: 0 0 0 3px rgba(255,255,255,.04); }
.select.small { max-width: 200px; padding: 8px 10px; }
.filters { display:flex; gap:10px; align-items:center; margin: 10px 0 14px; flex-wrap: wrap; }

/* Buttons */
.btn { border:none; border-radius: 8px; padding: 10px 14px; font-weight: 700; cursor:pointer; transition: var(--transition); background:#18202a; color: #d7e2ee; border:1px solid var(--stroke); }
.btn:hover { transform: translateY(-1px); border-color: var(--stroke-2); }
.btn.small { padding: 7px 10px; font-size: 13px; }
.btn-ghost { background: transparent; border:1px solid var(--stroke); color: var(--text-soft); }
.btn-ghost:hover { color: var(--text); background:#101620; }
.btn-accent { background: var(--accent); color:#001015; border-color: transparent; }
.btn-accent:hover { filter: brightness(1.05); box-shadow: 0 0 0 3px var(--accent-soft); transform: translateY(-1px); }
.btn-danger { background:#30161a; color:#ffb1b1; border:1px solid rgba(255,93,93,.35); }
.btn-danger:hover { background:#3a1a20; color:#ffd2d2; }

/* Stats */
.stats-grid { display:grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 12px; margin-top: 4px; }
.stat-card { background: var(--bg2); border:1px solid var(--stroke); border-radius: var(--radius-lg); padding: 16px; box-shadow: var(--shadow); }
.stat-label { color: var(--muted); font-size: 13px; margin-bottom: 6px; }
.stat-value { font-weight: 900; font-size: 28px; color:#cfe9f7; }

/* ========== APPS GRID ========== */
.apps-grid { display:grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 14px; }
.grid-skeleton { display:grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap:14px; }
.card-skel { height: 220px; border-radius: var(--radius-lg); background: linear-gradient(180deg, #0f141b, #131922); border:1px solid var(--stroke); animation: pulse 1.6s ease-in-out infinite; }

.app-card { background: var(--bg2); border:1px solid var(--stroke); border-radius: var(--radius-lg); padding: 14px; display:flex; flex-direction:column; gap: 10px; box-shadow: var(--shadow); transition: var(--transition); }
.app-card:hover { transform: translateY(-2px); border-color: var(--stroke-2); }
.app-card .icon { width: 100%; aspect-ratio: 1 / 1; object-fit: cover; border-radius: 14px; background:#0d1218; border:1px solid var(--stroke); }
.app-card .ttl { font-weight: 700; letter-spacing: .2px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.app-card .meta { display:flex; align-items:center; gap:8px; }
.app-card .pill { margin-left: 0; padding: 2px 8px; font-weight:800; border-color: var(--stroke); }
.pill.vip { background:#1f2230; color:#d9e6ff; border:1px solid #2a3245; }
.pill.free { background:#18241c; color:#d1ffe5; border:1px solid #21352a; }
.app-card .cnt { margin-left:auto; color: var(--muted); font-size: 13px; }
.row-actions { display:flex; gap:8px; }

/* ========== USERS TABLE ========== */
.table-wrap { width:100%; overflow:auto; border:1px solid var(--stroke); border-radius: var(--radius); background: var(--bg2); }
.data-table { width:100%; border-collapse: collapse; font-size:14px; }
.data-table thead th { position: sticky; top:0; text-align:left; padding: 10px 12px; background: #121720; color: #c8d6e5; border-bottom:1px solid var(--stroke); }
.data-table tbody td { padding: 10px 12px; border-bottom:1px solid var(--stroke); color:#eaf2ff; }
.data-table tbody tr:hover td { background:#0f141b; }

.list-skeleton .row-skel { height: 44px; border-radius: 8px; background: linear-gradient(90deg, #0f141b, #141a23, #0f141b); background-size: 200% 100%; animation: shimmer 2.2s infinite; margin: 8px 0; }

/* ========== ORDERS LIST ========== */
.orders-list { display:flex; flex-direction:column; gap:8px; }
.order-row { border:1px solid var(--stroke); background: var(--bg2); border-radius: var(--radius); display:grid; grid-template-columns: 1fr auto auto; gap: 12px; padding: 10px 12px; align-items:center; transition: var(--transition); }
.order-row:hover { border-color: var(--stroke-2); background:#141a22; }
.order-row .col.main .id { font-weight:800; letter-spacing:.3px; }
.order-row .col.main .meta { color: var(--muted); font-size: 13px; margin-top: 2px; }
.order-row .col.mid { display:flex; flex-direction:column; gap:4px; align-items:flex-start; }
.order-row .time { color: var(--muted); font-size: 12px; }
.status { font-weight: 800; font-size: 12px; letter-spacing:.2px; border-radius: 999px; padding: 3px 8px; border:1px solid var(--stroke); }
.status.pending { background:#2a2416; color:#ffe7a3; border-color:#3b331b; }
.status.processing { background:#2a1f14; color:#ffd0a6; border-color:#3a2a1b; }
.status.completed { background:#18261f; color:#bff7d9; border-color:#21392b; }
.status.canceled { background:#2a1818; color:#ffc6c6; border-color:#3a2020; }

/* ========== CHAT PANEL (RIGHT SLIDE) ========== */
.chat-panel { position: fixed; inset: 0 0 0 auto; width: 420px; max-width: 100%; background: var(--bg2); border-left:1px solid var(--stroke); transform: translateX(100%); transition: transform .28s ease; display:flex; flex-direction:column; z-index: 50; box-shadow: -12px 0 40px rgba(0,0,0,.45); }
.chat-panel.open { transform: translateX(0); }
.chat-head { display:flex; align-items:center; justify-content: space-between; gap:10px; padding: 12px; border-bottom:1px solid var(--stroke); background:#10161f; }
.chat-title h3 { margin:0; font-size: 16px; font-weight: 800; }
.chat-title .sub { color: var(--muted); font-size: 12px; margin-top: 2px; }
.icon-btn { background: transparent; border:1px solid var(--stroke); color: var(--text-soft); border-radius: 8px; padding: 6px 10px; cursor:pointer; transition: var(--transition); }
.icon-btn:hover { background:#0f141b; color: var(--text); }

.chat-toolbar { display:flex; gap:8px; align-items:center; padding: 10px 12px; border-bottom:1px solid var(--stroke); background:#0f1419; }
.chat-scroll { flex:1; overflow:auto; padding: 12px; display:flex; flex-direction:column; gap: 8px; }
.system-message { font-size: 13px; color: var(--muted); border:1px dashed var(--stroke); border-radius: var(--radius); padding: 8px; }
.msg { max-width: 78%; padding: 8px 10px; border-radius: 10px; border:1px solid var(--stroke); }
.msg.user { background:#121a24; }
.msg.admin { background:#0e2730; border-color:#133642; }
.msg a { color:#cde8ff; text-decoration: underline; }

.chat-input { display:flex; gap:8px; padding: 10px 12px; border-top:1px solid var(--stroke); background:#0f1419; }
.chat-input .input { flex:1; max-width: none; }

/* ========== MODAL (APP EDIT) ========== */
.modal { position: fixed; inset:0; background: rgba(0,0,0,.55); display:none; align-items:center; justify-content:center; padding: 20px; z-index: 60; }
.modal.visible { display:flex; }
.modal-card { width: 100%; max-width: 520px; background: var(--bg2); border:1px solid var(--stroke); border-radius: var(--radius-lg); box-shadow: var(--shadow); padding: 18px; }
.modal-close { float:right; background: transparent; border:1px solid var(--stroke); color: var(--text-soft); padding: 6px 10px; border-radius:8px; cursor:pointer; }
.modal-close:hover { background:#0f141b; color:var(--text); }

label { display:block; margin-top: 12px; color: var(--muted); font-size: 13px; }
input[type="text"], input[type="url"], textarea, select { width:100%; background:#0d1218; border:1px solid var(--stroke); color:var(--text); border-radius: 8px; padding: 10px 12px; margin-top: 4px; }
textarea { resize: vertical; min-height: 96px; }
.checkbox-line { display:flex; gap:8px; align-items:center; margin-top: 10px; }
.modal-actions { display:flex; gap:8px; justify-content:flex-end; margin-top: 14px; }

/* ========== SKELETON ANIMATIONS ========== */
@keyframes pulse { 0% { opacity:.8 } 50% { opacity: .45 } 100% { opacity:.8 } }
@keyframes shimmer { 0% { background-position: 200% 0 } 100% { background-position: -200% 0 } }

/* ========== RESPONSIVE ========== */
@media (max-width: 1100px) {
  .app-shell { grid-template-columns: 220px 1fr; }
}
@media (max-width: 860px) {
  .app-shell { grid-template-columns: 1fr; }
  .sidebar { position: sticky; top:0; z-index: 15; border-right: none; border-bottom:1px solid var(--stroke); }
  .side-bottom { display:none; }
}
@media (max-width: 520px) {
  .apps-grid, .grid-skeleton { grid-template-columns: repeat(2, 1fr); }
  .order-row { grid-template-columns: 1fr; gap: 8px; }
  .chat-panel { width: 100%; }
}
